{% extends "navbar.html" %}

{% block events %}
{% load static %}
<style>
  input:focus,
  select:focus,
  textarea:focus {
    outline: none !important;
  }

  *:focus-visible {
    outline: none !important;
  }
</style>

{% comment %} top {% endcomment %}
<div class="relative">
  <img 
    class="w-full h-80 my-5 rounded-lg object-cover"
    src="{% static 'images/premium_photo-1661884752233-eac0b5efe655.jpg' %}" 
    alt=""
  />
  <div class="absolute inset-0 flex px-4 md:px-6 items-center justify-center bg-gray-900/50 rounded-lg">
    <span class="text-5xl md:text-6xl font-bold text-white text-center">
      GOOD-DAY EVENTS
    </span>
  </div>
</div>

{% comment %} search {% endcomment %}
<div>
  <h1 class="font-bold my-6 text-3xl md:text-4xl text-center">Event Search</h1>

  <form method="GET" action="{% url 'events' %} " class = " bg-orange-400 rounded-lg shadow-2xl">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 p-5">

      <div class="flex flex-col">
        <label class="text-lg font-semibold mb-1 text-center">Search for</label>
        <input 
          type="text" 
          name="search"
          class="rounded px-3 py-2"
          placeholder="Search with name"
          value="{{request.GET.search}}"
        />
      </div>

      <div class="flex flex-col">
        <label class="text-lg font-semibold mb-1 text-center">Start Date</label>
        <input 
          type="date" 
          name="start_date"
          class="rounded px-3 py-2"
          value="{{request.GET.start_date}}"
        />
      </div>

      <div class="flex flex-col">
        <label class="text-lg font-semibold mb-1 text-center">End Date</label>
        <input 
          type="date" 
          name="end_date"
          class="rounded px-3 py-2"
          value="{{request.GET.end_date}}"
        />
      </div>

      <div class="flex flex-col">
        <label class="text-lg font-semibold mb-1 text-center">Category</label>
        <select 
          name="category"
          class="px-3 py-2 rounded"
        >
          <option value="">All Categories</option>
          {% for cat in categories %}
            <option value="{{cat.id}}" {% if request.GET.category == cat.id|stringformat:"s" %}selected{% endif %}>
              {{cat.category_name}}
            </option>
          {% endfor %}
        </select>
      </div>

    </div>

    <div class="text-center">
      <button 
        type="submit"
        class="bg-orange-600 my-4 hover:bg-green-700 text-white px-6 py-2 rounded font-semibold shadow-2xl"
      >
        Search
      </button>
    </div>
  </form>
</div>


{% comment %} Searched events {% endcomment %}
<div class="grid grid-cols-1 xl:grid-cols-2 my-6 px-3 md:px-4">

  {% for event in events %}
  <div class="flex flex-col sm:flex-row bg-white rounded-lg px-3 py-3 gap-6 shadow-lg mx-1 md:mx-4 my-4">

    <div class="flex justify-center">
      {% if event.image %}
      <img 
        class="w-64 h-44 md:h-48 object-cover rounded-md"
        src="{{ event.image.url }}"
        alt="Event Image"
      />
      {% else %}
      <div class="bg-gray-200 rounded-sm  w-64 h-64 p-10 mx-auto my-auto">
        <h1 class="text-center  py-20">No Image</h1>
      </div>
      {% endif %}
    </div>

    <div class="flex-1">
      <div class="flex flex-col justify-between">
        <h1 class="font-bold text-lg md:text-xl px-6 md:px-2 mb-2">
          {{event.name}}
        </h1>

        <p class="italic text-sm md:text-base px-6 md:px-2 text-ellipsis text-justify">
          {{event.description}}
        </p>

        <span class="font-semibold italic px-6 md:px-2 mb-2 my-4">
          Category: {{event.category.category_name}}
        </span>
      </div>

      <div class="my-5 text-center">
			  
				  
        <div class="grid sm:grid-cols-2 sm:items-center gap-6 sm:gap-10 mx-4">
      
        <div class="px-3 py-3 bg-orange-300 rounded-md flex justify-center items-center gap-2">
          <h1 class="font-semibold ">Total Participants:</h1>
          <span>{{event.participant.count}}</span>
        </div>
      
        <div class="px-3 py-3 bg-orange-300 rounded-md flex justify-center items-center gap-2">
          <h1 class="font-semibold">Start-time:</h1>
          <span>{{event.time}}</span>
        </div>
      
        </div>
      
        
        <div class="grid sm:grid-cols-2 sm:items-center gap-6 sm:gap-10 mx-4 mt-6">
      
          <div class="px-3 py-3 bg-orange-300 rounded-md flex justify-center items-center gap-2">
            <h1 class="font-semibold">Location:</h1>
            <span>{{event.location}}</span>
          </div>
      
        <a href="{% url 'event_detail' %}?id={{event.id}}">
          <button class="px-4 py-2 bg-orange-400 rounded-md text-center font-semibold w-full sm:w-auto">
          View Details
          </button>
        </a>
      
        </div>
      
      </div>
    </div>

  </div>
  {% endfor %}

</div>

{% endblock events %}
